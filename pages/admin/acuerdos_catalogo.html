<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Acuerdos</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/bootstrap-datepicker@1.9.0/dist/css/bootstrap-datepicker3.min.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
      rel="stylesheet" />

    <script
      src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
      defer></script>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
      integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"></script>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous" />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/v/bs/jq-3.6.0/dt-1.11.3/r-2.2.9/datatables.min.css" />

    <script
      type="text/javascript"
      src="https://cdn.datatables.net/v/bs/jq-3.6.0/dt-1.11.3/r-2.2.9/datatables.min.js"></script>
  </head>
  <body>
    <div class="container-fluid">
      <table
        id="table"
        class="table table-striped table-bordered dt-responsive nowrap"
        style="width: 100%"></table>
    </div>

    <script>
      const response = {
        datos: [
          {
            id: 1,
            nombre: 'Speothos vanaticus',
            descripcion: null,
            acciones: null,
          },
          {
            id: 2,
            nombre: 'Sciurus vulgaris',
            descripcion: null,
            acciones: null,
          },
          {
            id: 3,
            nombre: 'Ursus americanus',
            descripcion: null,
            acciones: null,
          },
          {
            id: 4,
            nombre: 'Suricata suricatta',
            descripcion: null,
            acciones: null,
          },
          {
            id: 5,
            nombre: 'Melursus ursinus',
            descripcion: null,
            acciones: null,
          },
        ],
        notificacion: {
          icon: 'error',
          title: 'Oops...',
          text: 'Something went wrong!',
        },
        formulario: [
          { name: 'id', value: '-1', mensaje: 'Debe ser mayor que cero' },
          { name: 'nombre', value: '-1', mensaje: 'Debe ser mayor que cero' },
          {
            name: 'descripcion',
            value: 'A',
            mensaje: 'Error',
          },
        ],
      };

      function initialConfigDataTable(headers) {
        const columns = [];
        const columnDefs = [];

        headers.forEach((column, index) => {
          const { orderable = true, searchable = true, ...others } = column;
          columns.push({ ...others });

          if (!orderable || !searchable) {
            columnDefs.push({ targets: [index], searchable, orderable });
          }
        });

        return [columns, columnDefs];
      }

      $(document).ready(function () {
        const headers = [
          { title: 'ID', data: 'id' },
          { title: 'Nombre', data: 'nombre' },
          { title: 'Descripic√≥n', data: 'descripcion' },
          { title: 'Acciones', data: 'acciones' },
        ];

        const [columns, columnDefs] = initialConfigDataTable(headers);

        new DataTable('#table', {
          processing: true,
          deferRender: true,
          columns,
          columnDefs,
          data: response.datos,
        });
      });

      // Swal.fire(response.notificacion);
    </script>
  </body>
</html>
